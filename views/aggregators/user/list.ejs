<section class="productsdetail">
	<div class="container">
		<div class="breadcrumb_card">
			<%- include('../../shared/breadcrumb') %>
		</div>
		<div class="product_card">
			<a href="add" style="float: right; margin-right:60px; margin-top: 20px;"><button class="main_btn"><%= labels['LBL_ADD_FARMER'][language] %></button></a>
			<div class="row add-address post-add">
				<div class="col-md-12 col-sm-12 col-xs-12">
			 		<h3><%= labels['LBL_FARMER_LIST'][language] %></h3>
				</div>
				
				<% for(let i=0; i < farmers.length; i++) { %>
				    <% let name = farmers[i]['name'] %>
					<div class="col-lg-12 col-sm-12 my_oderDetails">
						<div class="col-lg-3 col-md-6 col-sm-12 kp_myorder">
							<img src="<%= farmers[i]['photo'] %>" class="img-farmer-size">
						</div>
						<div class="col-lg-8 col-md-6 col-sm-12 kp_myorder">
							<h2><%= farmers[i]['name'] %></h3>
							<h3><i class="fa fa-envelope-o" aria-hidden="true"></i> <%= farmers[i]['email'] %></h3>
							<% if(farmers[i]['mobile_country_code'] && farmers[i]['phone_number']){ %>
								<h3><i class="fa fa-phone" aria-hidden="true"></i> <%= farmers[i]['mobile_country_code'] %> <%= farmers[i]['phone_number'] %></h3>
							<% } %>
							<h3><i class="fa fa-building" aria-hidden="true"></i> <%= farmers[i]['bank_name'] %> - <%= farmers[i]['bank_account_no'] %></h3>
							<h3><i class="fa fa-calculator" aria-hidden="true"></i> <%= farmers[i]['nif'] %></h3>
							<div class="kp_location">
								<i class="fa fa-map-marker" aria-hidden="true"></i> <span><%= farmers[i]['address'] %></span>
							</div>
						</div>
						<div class="edit_ico">
							<a href="<%=baseURL%>aggregators/user/display/<%= farmers[i].farmer_id %>"><i class="fa fa-edit"></i></a>
						</div>
						<div class="delete_ico">
							<a onclick="notificacao('<%=name%>','<%= farmers[i].farmer_id %>')"
								href="#"><i  class="fa fa-trash"></i></a>
						</div>
					</div>
				<% } %>
			</div>
		</div>
	</div>
</section>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>

<script>
	function notificacao(farmers, farmer_id) {
			$.confirm({
			title: 'Desejas remover o produtor ?',
			content: "ID: " + farmer_id + "<br>" + 'Nome: ' + farmers,
			type: 'purple',
			typeAnimated: true,
			buttons: {
				tryAgain: {
					text: 'Sim',
					btnClass: 'btn',
					action: function () {
						$.ajax({
							url: "<%=baseURL%>aggregators/user/remove/" + farmer_id,
							success: function (result) {
								if(result == '0'){
									showAlert('NÃ£o pode remover o produtor com id: ' + farmer_id, '<%=baseURL%>', "<%= labels['LBL_MESSAGE'][language] %>");
									setTimeout(() => {
										hideAlert(),
										location.reload(true)
									}, 3000);
								}else if(result == '1'){
									showAlert('Produtor removido com sucesso!', '<%=baseURL%>', "<%= labels['LBL_MESSAGE'][language] %>");
									setTimeout(() => {
										hideAlert(),
										location.reload(true)
									}, 3000);
								}
							},
							error: function () {
								location.reload(true);
							}
						});
					}
				},
				close: function () {
				}
			}
		});
	}
</script>